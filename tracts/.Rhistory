library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
library(tidyverse)
library(tigris)
library(tidyverse)
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
# accomack tracts 2019
acc_tract_2019 <- tracts(state = "51", county = "001", cb = TRUE, year = 2019)
nor_tract_2019 <- tracts(state = "51", county = "131", cb = TRUE, year = 2019)
# map
ac19 <- ggplot(acc_tract_2019) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2019") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
ac20 <- ggplot(acc_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
no19 <- ggplot(nor_tract_2019) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 10", guide = "none") +
labs(title = "2019") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
no20 <- ggplot(nor_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 10", guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
acc <- ac19 + ac20
ggsave(acc, "accomack_tracts.jpg")
acc <- ac19 + ac20
acc
?ggsave
acc <- ac19 + ac20
ggsave("accomack_tracts.jpg")
nor <- no19 + no20
ggsave("northampton_tracts.jpg")
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
# accomack tracts 2019
acc_tract_2019 <- tracts(state = "51", county = "001", cb = TRUE, year = 2019)
nor_tract_2019 <- tracts(state = "51", county = "131", cb = TRUE, year = 2019)
# eastern shore tracts 2021
acc_tract_2021 <- tracts(state = "51", county = "001", cb = TRUE, year = 2021)
nor_tract_2021 <- tracts(state = "51", county = "131", cb = TRUE, year = 2021)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
# accomack tracts 2019
acc_tract_2019 <- tracts(state = "51", county = "001", cb = TRUE, year = 2019)
nor_tract_2019 <- tracts(state = "51", county = "131", cb = TRUE, year = 2019)
# map
ac19 <- ggplot(acc_tract_2019) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2019") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
ac20 <- ggplot(acc_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
acc <- ac19 + ac20
acc
ac21 <- ggplot(acc_tract_2021) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2021") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
acc <- ac19 + ac20 /ac21
acc
acc <- ac19 + ac20 + ac21
acc
no19 <- ggplot(nor_tract_2019) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 10", guide = "none") +
labs(title = "2019") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
no20 <- ggplot(nor_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 10", guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
no21 <- ggplot(nor_tract_2021) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 10", guide = "none") +
labs(title = "2021") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
nor <- no19 + no20 +no21
nor
View(nor_tract_2021)
View(nor_tract_2020)
View(acc_tract_2021)
View(acc_tract_2020)
View(nor_tract_2021)
ac20 <- ggplot(acc_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
ac20
ac21 <- ggplot(acc_tract_2021) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20") +
labs(title = "2021") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
ac21
no21
View(acc_tract_2021)
View(nor_tract_2021)
acc_tract_2021_noncb <- tracts(state = "51", county = "001", cb = FALSE, year = 2021)
nor_tract_2021_noncb <- tracts(state = "51", county = "131", cb = FALSE, year = 2021)
ac21 <- ggplot(acc_tract_2021_noncb) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", guide = "none") +
labs(title = "2021") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
ac21
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2021
acc_tract_2021 <- tracts(state = "51", county = "001", cb = TRUE, year = 2021)
nor_tract_2021 <- tracts(state = "51", county = "131", cb = TRUE, year = 2021)
acc_tract_2021_noncb <- tracts(state = "51", county = "001", cb = FALSE, year = 2021)
nor_tract_2021_noncb <- tracts(state = "51", county = "131", cb = FALSE, year = 2021)
ggplot(acc_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", , guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
ggplot(acc_tract_2020) + geom_sf(aes(fill = TRACTCE)) +
scale_fill_tableau(palette = "Tableau 20", , guide = "none") +
labs(title = "2020") +
theme_void() +
theme(plot.title = element_text(hjust = 0.5))
library(leaflet)
leafet(data = acc_tract_2020) %>%
addPolygons()
library(leaflet)
leaflet(data = acc_tract_2020) %>%
addPolygons()
leaflet(data = acc_tract_2020) %>%
addPolygons() %>%
addPopups(acc_tract_2020$TRACTCE)
leaflet(data = acc_tract_2020) %>%
addPolygons() %>%
addPopups(~TRACTCE)
leaflet(data = acc_tract_2020) %>%
addPolygons() %>%
addPopups(label = ~TRACTCE)
leaflet(data = acc_tract_2020) %>%
addPolygons(popup = paste0("TRACTCE"))
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE,)
leaflet(data = acc_tract_2020) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
leaflet(data = nor_tract_2020) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
leaflet(data = nor_tract_2020) %>%
addPolygons(popup = paste0("tract: ", nor_tract_2020$TRACTCE))
View(nor_tract_2021_noncb)
library(tidyverse)
library(readxl)
library(tigris)
#library(sf)
library(leaflet)
names <- read_excel("tract_names.xlsx")
View(names)
tracts <- tracts(state = "51", county = c("001", "131"), cb = TRUE, year = 2020)
View(tracts)
names$tract
tracts$TRACTCE
names <- names %>%
mutate(tract = as.character(tract),
tract = str_pad(tract, 6, side = "left", pad = "0"))
names$tract
tracts$TRACTCE
tracts2 <- tracts(state = "51", county = c("001", "131"), cb = FALSE, year = 2020)
tracts2$TRACTCE
sum(names$tract %in% tracts2$TRACTCE)
which(names$tract %in% tracts2$TRACTCE)
!which(names$tract %in% tracts2$TRACTCE)
which(!names$tract %in% tracts2$TRACTCE)
which(!tracts2$TRACTCE %in% names$tract)
tracts2$TRACTCE
# Data sources ----
names <- read_excel("tract_names.xlsx")
ggplot(tracts) + geom_sf(aes(fill = TRACTCE))
ggplot(tracts2) + geom_sf(aes(fill = TRACTCE))
View(tracts2)
View(tracts)
View(tracts2)
ggplot(tracts2 %>% filter(!str_detect(TRACTCE, "99", negate = TRUE))) +
geom_sf(aes(fill = TRACTCE))
ggplot(tracts2 %>% filter(!str_detect(TRACTCE, "99", negate = FALSE))) +
geom_sf(aes(fill = TRACTCE))
View(tracts2)
View(names)
View(tracts)
View(tracts)
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
library(leaflet)
leaflet(data = acc_tract_2020) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
acc_tract_2021_noncb <- tracts(state = "51", county = "001", cb = FALSE, year = 2021)
leaflet(data = acc_tract_2021_noncb) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2021_noncb$TRACTCE))
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
acc_tract_2020 <- st_crs(acc_tract_2020, "4326")
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
acc_tract_2020_noncb <- tracts(state = "51", county = "001", cb = FALSE, year = 2021)
nor_tract_2020_noncb <- tracts(state = "51", county = "131", cb = FALSE, year = 2021)
library(leaflet)
library(tidyverse)
library(tigris)
library(sf)
library(leaflet)
library(ggthemes)
library(patchwork)
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
nor_tract_2020 <- tracts(state = "51", county = "131", cb = TRUE, year = 2020)
acc_tract_2020_noncb <- tracts(state = "51", county = "001", cb = FALSE, year = 2021)
nor_tract_2020_noncb <- tracts(state = "51", county = "131", cb = FALSE, year = 2021)
crs(acc_tract_2020)
st_crs(acc_tract_2020)
library(leaflet)
acc_tract_2020 <- st_crs(acc_tract_2020, "4326")
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
leaflet(data = acc_tract_2020) %>%
#addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
# eastern shore tracts 2020
acc_tract_2020 <- tracts(state = "51", county = "001", cb = TRUE, year = 2020)
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
leaflet(data = acc_tract_2020_noncb) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2021_noncb$TRACTCE))
leaflet(data = acc_tract_2020_noncb) %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020_noncb$TRACTCE))
leaflet(data = acc_tract_2020_noncb) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020_noncb$TRACTCE))
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
acc_tract_2020 <- st_transform(acc_tract_2020, "4326")
?st_transform
acc_tract_2020 <- st_transform(acc_tract_2020, 4326)
leaflet(data = acc_tract_2020) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("tract: ", acc_tract_2020$TRACTCE))
# Setup ----
library(tidyverse)
library(readxl)
library(tigris)
#library(sf)
library(leaflet)
# Data sources ----
names <- read_excel("tract_names.xlsx")
names <- names %>%
mutate(tract = as.character(tract),
tract = str_pad(tract, 6, side = "left", pad = "0"))
tracts <- tracts(state = "51", county = c("001", "131"), cb = TRUE, year = 2020)
tracts2 <- tracts(state = "51", county = c("001", "131"), cb = FALSE, year = 2020)
ggplot(tracts) + geom_sf(aes(fill = TRACTCE))
ggplot(tracts2 %>% filter(!str_detect(TRACTCE, "99"))) +
geom_sf(aes(fill = TRACTCE))
ggplot(tracts) + geom_sf(aes(fill = TRACTCE))
ggplot(tracts2 %>% filter(!str_detect(TRACTCE, "99"))) +
geom_sf(aes(fill = TRACTCE))
ggplot(tracts) + geom_sf(aes(fill = TRACTCE))
View(names)
which(!names$tract %in% tracts2$TRACTCE)
tracts <- tracts %>%
left_join(names, by = c("TRACTCE" = "tract"))
View(tracts)
# Map ----
tracts <- st_transform(tracts, crs = 4326)
library(sf)
# Map ----
tracts <- st_transform(tracts, crs = 4326)
leaflet(tracts) %>%
addTile() %>%
addPolygons(popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tract$names))
leaflet(tracts) %>%
addTiles() %>%
addPolygons(popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tract$names))
leaflet(tracts) %>%
addTiles() %>%
addPolygons(popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tracts$names))
leaflet(tracts) %>%
#addTiles() %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tracts$names))
leaflet(tracts) %>%
#addTiles() %>%
#addProviderTiles("CartoDB.Positron") %>%
addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tracts$names))
leaflet(tracts) %>%
#addTiles() %>%
#addProviderTiles("CartoDB.Positron") %>%
addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tracts$names))
# Setup ----
library(tidyverse)
library(readxl)
library(tigris)
library(sf)
library(leaflet)
# Data sources ----
names <- read_excel("tract_names.xlsx")
names <- names %>%
mutate(tract = as.character(tract),
tract = str_pad(tract, 6, side = "left", pad = "0"))
tracts <- tracts(state = "51", county = c("001", "131"), cb = TRUE, year = 2020)
tracts <- tracts %>%
left_join(names, by = c("TRACTCE" = "tract"))
# Map ----
tracts <- st_transform(tracts, crs = 4326)
leaflet(tracts) %>%
#addTiles() %>%
#addProviderTiles("CartoDB.Positron") %>%
addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Possible Names: ", tracts$names))
saveRDS(tracts, file = "tractnames.RDS")
library(tidyverse)
library(leaflet)
tracts <- readRDS("tractnames.RDS")
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("USImageryTopo") %>%
addPolygons(color = "black",
weight = 1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
#addTiles() %>%
addProviderTiles("USGS.USTopo") %>%
addPolygons(color = "black",
weight = 1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
#addTiles() %>%
addProviderTiles("USImageryTopo") %>%
addPolygons(color = "black",
weight = 1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
?fillOpacity
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
fillOpacity = 95,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
fillOpacity = 5,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
fillOpacity = .05,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
fillOpacity = .1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
leaflet(tracts) %>%
addTiles() %>%
#addProviderTiles("Esri.NatGeoWorldMap") %>%
addPolygons(color = "black",
weight = 1,
#fillOpacity = .1,
popup = paste0("Tract Number: ", tracts$TRACTCE, "<br>",
"Notes/Names: ", tracts$names))
